# htdocs/inbolsaNeo/api/.htaccess
RewriteEngine On
RewriteBase /inbolsaNeo/api/

# ---- CORS (mismo host; permite credenciales) ----
Header always set Access-Control-Allow-Origin "http://localhost"
Header always set Access-Control-Allow-Credentials "true"
Header always set Access-Control-Allow-Headers "Content-Type"
Header always set Access-Control-Allow-Methods "GET,POST,OPTIONS"

# Responder preflight OPTIONS vac√≠os con 204
RewriteCond %{REQUEST_METHOD} =OPTIONS
RewriteRule ^ - [R=204,L]

# ---- Routing ----
# /inbolsaNeo/api/health
RewriteRule ^health$ health.php [L,QSA]

# /inbolsaNeo/api/auth/login, /auth/me, /auth/logout
RewriteRule ^auth/?$ auth.php [L,QSA]
RewriteRule ^auth/(.+)$ auth.php?route=$1 [L,QSA]

# fallback
RewriteRule ^ index.php [L]
